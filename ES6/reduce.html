<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // reduce() 方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算成一个值
        // reduce（）对于空数组是不会执行回调函数的

        /* 
            arr.reduce(callback,[initialValue])
            callback(执行数组中每个值的函数，包含四个参数)
            1 previousValue （上一次调用回调返回的值，或者是提供的初始值  initialValue）
            2 currentValue  （数组中当前被处理的元素）
            3 index          (当前元素在数组中的索引)
            4 array          (调用 reduce 的数组)
            initialValue     (作为第一次调用callback 的第一个参数，设置为0,{},[]时应该特别注意，因为会0和第一个数据进行计算)
         */

        //  reduce 基本用法
        //  求和 求乘积

        /* var arr = [1,2,3,4]
        var sum = arr.reduce((x,y) => x + y)
        var mul = arr.reduce((x,y) => x * y)
        console.log(sum)
        console.log(mul) */

        // reduce 高级用法
        // 计算数组中每个元素出现的次数

        /* let names = ['Alice', 'Bob', 'Tiff', 'Bruce', 'Alice'];
        let nameNum = names.reduce((pre,cur)=>{
            console.log(pre)
            if(cur in pre){
                pre[cur]++
            }else{
                pre[cur] = 1 
            }
            return pre
        },{})
        console.log(nameNum); */

        // 新建一个数组，可以通过这样的方式进行赋值
        // let cc = {}
        // cc['pro'] = 1
        // console.log(cc)
        
        // 数组去重
        // let arr = [1,2,3,4,4,1]
        // let newArr = arr.reduce((pre,cur)=>{
        //     if(!pre.includes(cur)){
        //         return pre.concat(cur)
        //     }else{
        //         return pre
        //     }
        // },[])
        // console.log(newArr)


        // 将二维数组转化为一维
        
        /* let arr = [[0,1],[2,3],[3,4],[4,5]]
        let newArr = arr.reduce((pre,cur)=>{
            return pre.concat(cur)
        },[])
        console.log(Array.from(new Set(newArr)))   // Set去重 */

        // 将多维数组转化为一维
        let arr = [[0,1],[2,3],[4,[5,6,7]]]
        const newArr = function(arr){
            return arr.reduce((pre,cur) => {
                return pre.concat(Array.isArray(cur)?newArr(cur):cur)
            },[])
        }
        console.log(newArr(arr))

        // 对象里的属性求和
        var result = [
            {
                subject:'math',
                score:10
            },
            {
                subject:'chinese',
                score:20
            },
            {
                subject:'english',
                score:30
            }
        ]
        var sum = result.reduce((pre,cur)=>{
            return cur.score + pre
        },0)
        console.log(sum)
    </script>
</body>
</html>